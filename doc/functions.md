# 功能定义

软件产品在生产环境中部署和运行时，出现异常的原因主要有两种：

1. 环境因素：比如软件需要的硬件条件不具备，软件版本不匹配，网络传输速度太慢，磁盘IO速度太慢等；

1. 软件本身因素：主要由软件的bug引起。

为了快速定位问题，提高软件易用性，GDEP检查软件开发着指定的环境条件与实际部署环境是否匹配，如果匹配，说明异常由软件本身引起，否则给出哪些因素不符合指定要求，从而达到快速定位问题的目的。

## 指标测试

### 主机静态指标

* 操作系统类型：ostype

* CPU信息：cpu

* 物理内存：memory

* 物理磁盘空间：disk

* JDK类型和版本：jdk

* 最大文件句柄数：fd

### 运行性能指标

* CPU性能：cpu-perf

* 内存读写速率：mem-io

* 磁盘读写速率：disk-io

* 网络传输速率：net-io，一个IP地址列表，从工具所在主机到列表中所有主机的网络传输速率；

* 多线程性能：multi-thread

* 可用内存

* 可用磁盘空间

* 最大允许句柄数

* 可用句柄数

* 系统最大进程数，最大总线程数，最大进程内线程数

* 最大连接数（待确认）

### 扩展指标

如果GDEP默认的检测指标不能满足用户的具体需求，用户可以编写程序或者脚本，挂载到GDEP系统上，支持Shell脚本和Java程序。

#### 环境测试

* SHELL类型测试

* RPM包完整性检测

#### MQ测试

* 连通性测试；

* 队列连通性；

#### 数据库测试

数据库连通性测试：jdbc url；

#### 文件测试

* 文件存在性测试；

* 文件内容测试：例如/etc/hosts；

#### 环境变量测试

环境变量是否存在，取值是否正确，例如JAVA_HOME等；

#### 系统服务测试

系统服务是否存在，状态是否正确，例如Telnet, SSH, FTP, iptables等；

## 基准测试

提供基准时，给出各指标测试结果相对于基准数据的相对值，否则给出测试结果的绝对值。


# 场景说明

## 静态指标测试


场景说明：测试硬件环境的静态指标。

场景描述：

1. 安装GDEP；

1. 在检测机上编写配置文件dep.conf:

    [basic]
    ostype
    cpu
    memory
    disk
    jdk
    fd

1. 在dep.conf所在目录下运行：dep

1. 分析测试报告；

## 性能测试

场景说明：测试硬件环境的静态和性能测试。

场景描述：

1. 安装GDEP；

1. 在检测机上编写配置文件dep.conf:

    [base]
    ostype
    freq
    mem
    disk
    jdk
    fd
    cpu-perf
    mem-io
    disk-io
    net-io
    multi-thread

    [client]
    10.12.2.61
    10.12.2.62
    10.12.2.63

1. 在dep.conf所在目录下运行：dep

1. 分析测试报告；

## 扩展测试

### 自定义脚本

场景说明：运行用户自定义测试脚本；

场景描述：

1. 安装GDEP；

1. 编写测试报告（待后续完成）；

1. 分析测试报告；

### 自定义程序

场景说明：运行用户自定义测试程序；

场景描述：

1. 安装GDEP；

1. 编写测试报告（待后续完成）； 

1. 分析测试报告；

## 基准定义测试

运行一个普通测试，但结果被保存为基准格式，以便后续测试以此为基准，给出相对值。 

## 给定基准的测试

运行一个普通测试，在结果输出部分，根据用户指定的基准数据（或者从先前的测试报告中导出），计算出测试结果想对于基准的相对值，作为最终的测试结果输出。
